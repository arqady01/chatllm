# 温度控制功能

## 功能描述

在聊天设置界面中添加了温度控制选项，允许用户调整AI输出的随机性和创造力水平。温度参数是控制语言模型输出特性的重要参数。

## 功能特性

### 🎛️ 输入框控制
- **范围**: 0.0 - 1.0 (推荐实用范围)
- **输入方式**: 数字输入框
- **默认值**: 0.7
- **实时显示**: 当前温度值实时更新

### 📊 温度分级指导
- **0.0 - 0.3**: 确定性强，适合事实性问答
- **0.4 - 0.7**: 平衡模式，适合日常对话
- **0.8 - 1.0**: 创造性强，适合创意写作

### 💾 个性化设置
- 每个聊天组可以独立设置温度值
- 设置会自动保存并持久化存储
- 在发送消息时自动应用对应的温度参数

## 使用方法

1. **进入聊天设置**
   - 在任意聊天界面点击右上角的设置按钮 ⚙️
   
2. **调整温度值**
   - 在"温度控制"部分使用滑块调整数值
   - 参考温度分级指导选择合适的值
   - 实时查看当前温度值

3. **保存设置**
   - 点击右上角"保存"按钮
   - 设置立即生效，影响后续的AI回复

## 温度值效果说明

### 低温度 (0.0 - 0.3)
- **特点**: 输出更加确定和一致
- **适用场景**: 
  - 事实查询
  - 数学计算
  - 代码生成
  - 翻译任务
- **示例**: "什么是人工智能？" → 得到标准、准确的定义

### 中等温度 (0.4 - 1.0)
- **特点**: 平衡准确性和多样性
- **适用场景**:
  - 日常对话
  - 问题解答
  - 学习辅导
  - 一般性讨论
- **示例**: "如何学习编程？" → 得到实用且有一定变化的建议

### 高温度 (1.1 - 2.0)
- **特点**: 输出更加多样和创新
- **适用场景**:
  - 创意写作
  - 头脑风暴
  - 故事创作
  - 艺术创作
- **示例**: "写一个科幻故事开头" → 得到富有想象力的内容

## 技术实现

### 数据结构
```typescript
interface ChatGroup {
  // ... 其他属性
  temperature?: number; // 温度参数，范围0-2，默认0.7
}
```

### API集成
```typescript
// OpenAI API请求中包含温度参数
const requestBody = {
  model: this.config.model,
  messages,
  max_tokens: 1000,
  temperature: temperature !== undefined ? temperature : 0.7,
};
```

### UI组件
- 使用 `TextInput` 实现数字输入控制
- 实时显示当前数值
- 提供使用指导和分级说明
- 输入验证确保数值在有效范围内

## 最佳实践建议

### 🎯 任务导向选择
- **精确任务**: 使用低温度 (0.1-0.3)
- **平衡任务**: 使用中等温度 (0.6-0.8)  
- **创意任务**: 使用高温度 (1.2-1.8)

### 🔄 动态调整
- 根据AI回复效果调整温度值
- 如果回复太机械，适当提高温度
- 如果回复太随意，适当降低温度

### 💡 实验建议
- 对于新的对话主题，可以尝试不同温度值
- 观察不同温度下AI的回复风格差异
- 找到最适合当前任务的温度设置

## 文件修改记录

- `src/types/index.ts`: 添加温度参数到ChatGroup接口
- `src/components/ChatSettingsModal.tsx`: 实现温度控制UI
- `src/services/openai.ts`: 支持动态温度参数
- `src/contexts/AppContext.tsx`: 传递温度参数到API调用
- `__tests__/TemperatureControl.test.tsx`: 功能测试用例
