# 聊天设置功能演示

## 🎯 功能展示

### 1. 设置按钮位置
```
┌─────────────────────────────────┐
│ ← 实力哥                    ⚙️ │  ← 设置按钮在这里
├─────────────────────────────────┤
│                                 │
│  你好！                         │
│                                 │
│      你好！有什么我可以帮助你的吗？ │
│                                 │
└─────────────────────────────────┘
```

### 2. 设置模态框界面
```
┌─────────────────────────────────┐
│ 取消        聊天设置        保存 │
├─────────────────────────────────┤
│                                 │
│ 聊天组名称                      │
│ ┌─────────────────────────────┐ │
│ │ 实力哥                      │ │
│ └─────────────────────────────┘ │
│                                 │
│ 上下文设置                      │
│ 控制AI在对话中能记住多少条历史消息 │
│                                 │
│ 不限制上下文              ○     │
│ 记住所有历史消息                │
│                                 │
│ 上下文条数                      │
│ ┌───┐ 条                       │
│ │ 3 │                         │
│ └───┘                         │
│                                 │
│ 示例说明：                      │
│ • 设置为1：每次对话都是独立的    │
│ • 设置为3：AI会记住最近3条对话   │
│ • 不限制：AI会记住所有历史对话   │
│                                 │
└─────────────────────────────────┘
```

## 🔧 使用步骤

### 步骤1：进入对话界面
1. 从聊天组列表选择一个对话组
2. 进入对话界面

### 步骤2：打开设置
1. 点击右上角的齿轮图标 ⚙️
2. 设置模态框弹出

### 步骤3：修改聊天组名称（可选）
1. 在"聊天组名称"字段中输入新名称
2. 支持中文、英文、数字、符号
3. 最多50个字符

### 步骤4：设置上下文条数
#### 选项A：不限制上下文
1. 开启"不限制上下文"开关
2. AI会记住所有历史对话

#### 选项B：限制上下文条数
1. 关闭"不限制上下文"开关
2. 在"上下文条数"中输入数字（1-999）
3. AI只会记住最近N条消息

### 步骤5：保存设置
1. 点击右上角"保存"按钮
2. 设置立即生效
3. 模态框自动关闭

## 📊 上下文设置示例

### 示例1：独立问答模式
```
设置：上下文条数 = 1

对话流程：
用户：你好
AI：你好！有什么我可以帮助你的吗？

用户：我刚才说了什么？
AI：我没有看到你之前的消息记录。（因为只记住1条，即当前问题）
```

### 示例2：短期记忆模式
```
设置：上下文条数 = 3

对话流程：
用户：我叫张三
AI：你好张三！很高兴认识你。

用户：我今年25岁
AI：知道了，张三，你今年25岁。

用户：我的爱好是编程
AI：很棒！张三，25岁，爱好编程。

用户：我还喜欢什么？
AI：根据我们的对话，你提到你的爱好是编程。（记住最近3条对话）
```

### 示例3：完整记忆模式
```
设置：不限制上下文

对话流程：
用户：我叫张三
AI：你好张三！

用户：我今年25岁
AI：知道了，张三。

用户：我的爱好是编程
AI：很棒！

... 经过很多轮对话 ...

用户：我最开始告诉你我叫什么？
AI：你最开始告诉我你叫张三。（记住所有历史对话）
```

## 🎨 界面特点

### 设计风格
- 遵循iOS设计规范
- 清晰的视觉层次
- 友好的交互反馈

### 用户体验
- 一键访问设置
- 直观的开关控件
- 实时的设置预览
- 详细的功能说明

### 响应式设计
- 适配不同屏幕尺寸
- 支持横屏和竖屏
- 流畅的动画效果

## 🔍 技术细节

### 数据流
```
用户操作 → 设置模态框 → 更新ChatGroup → 保存到存储 → 应用到上下文
```

### 上下文应用时机
```
发送消息时 → 获取聊天组设置 → 应用上下文限制 → 构建API请求
```

### 性能优化
- 上下文限制减少内存使用
- 智能的消息截取算法
- 异步的数据保存操作

## 🚀 实际应用场景

### 学习辅导
- 设置较大的上下文（10-20条）
- 保持学习话题的连贯性
- 记住学生的学习进度

### 快速查询
- 设置上下文为1条
- 每次查询都是独立的
- 适合翻译、计算等场景

### 创作协作
- 不限制上下文
- 保持创作思路的连续性
- 记住所有创作细节

### 技术讨论
- 设置中等上下文（5-10条）
- 保持技术话题的相关性
- 避免过多无关信息干扰
